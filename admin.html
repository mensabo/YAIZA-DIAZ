<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Administrar Galerías</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div id="login-container">
        <h2>Acceso al Panel</h2>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Contraseña">
        <button id="login-button">Entrar</button>
    </div>

    <div id="admin-panel" style="display:none;">
        <header>
            <h1>Gestionar Galerías</h1>
            <button id="logout-button">Cerrar Sesión</button>
        </header>

        <div class="gallery-selector-container">
            <label for="gallery-selector">Selecciona la galería a editar:</label>
            <select id="gallery-selector">
                <option value="gallery">Galería del Libro</option>
                <option value="modeling_gallery">Galería de Modelaje</option>
                <option value="television_gallery">Galería de Televisión</option>
                <option value="radio_gallery">Galería de Radio</option>
                <option value="habecu_gallery">Galería de HABECU</option>
            </select>
        </div>

        <h2 id="current-gallery-title"></h2>

        <div class="form-section">
            <h3>Subir Nuevas Imágenes</h3>
            <div id="drop-zone">
                <p>Arrastra y suelta imágenes aquí o haz clic para seleccionarlas</p>
                <input type="file" id="file-input" multiple accept="image/*" style="display:none;">
            </div>
        </div>
        
        <div class="form-section">
            <h3>Añadir Nuevo Vídeo</h3>
            <input type="text" id="video-url-input" placeholder="URL del vídeo (.mp4, .webm...)">
            <input type="text" id="thumbnail-url-input" placeholder="URL de la imagen miniatura (.jpg, .png...)">
            <input type="text" id="video-description-input" placeholder="Descripción del vídeo">
            <button id="add-video-button">Añadir Vídeo a la Galería</button>
        </div>

        <hr style="margin: 2rem 0;">

        <h3>Editar Galería Actual</h3>
        <p>Arrastra los elementos para reordenarlos. Edita la descripción y pulsa Guardar.</p>
        <div id="gallery-list"></div>
        <button id="save-button">Guardar Cambios</button>
    </div>
    
    <script src="config.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-auth.js";
        import { getFirestore, collection, getDocs, orderBy, query, addDoc, writeBatch, doc, deleteDoc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-storage.js";

        const app = initializeApp(firebaseConfig);
        window.firebaseServices = {
            auth: getAuth(app),
            db: getFirestore(app),
            storage: getStorage(app),
            signInWithEmailAndPassword, onAuthStateChanged, signOut,
            collection, getDocs, orderBy, query, addDoc, writeBatch, doc, deleteDoc, getDoc,
            ref, uploadBytes, getDownloadURL, deleteObject
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="admin.js" type="module"></script>
</body>
</html>